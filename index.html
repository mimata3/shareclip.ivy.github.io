<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ShareClip</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <header class="header">
        <div class="header-left">
            <a href="index.html" class="logo-link">
                <img src="ShareClip.png" alt="ShareClipロゴ" class="logo">
                <span class="country-code">JP</span>
            </a>
        </div>
        <div class="header-center">
            <input type="text" placeholder="検索" class="search-input">
            <button class="search-button">🔍</button>
        </div>
    </header>

    <div class="container">
        <div class="main-video-area">
            <div class="video-player">
                <iframe width="100%" height="100%" src="https://www.youtube.com/embed/-0bzHcFz2Do?si=3JMjykCWTRYUH5ZF"
                    title="YouTube video player" frameborder="0"
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                    referrerpolicy="strict-origin-when-cross-origin" allowfullscreen
                    style="position: absolute; top: 0; left: 0;">
                </iframe>
            </div>

            <div class="video-info">
                <h2 id="current-video-title">2025狂犬病予防注射会場のドタバタ劇⑥ 富山市保健所前編</h2>

                <div class="channel-and-actions">
                    <div class="channel-info">
                        <div>
                            <span id="current-channel-name" style="display: block;">とやまソフトセンター</span>
                            <span id="current-subscriber-count"
                                style="font-size: 13px; font-weight: normal; color: #606060;">22万回視聴・7か月前</span>
                        </div>
                        <button style="margin-left: 20px;">チャンネル登録</button>
                    </div>

                    <div class="action-buttons">
                        <button id="like-button">
                            👍<span id="like-count">2.3千</span></button>
                        <button id="dislike-button">
                            👎</button>
                        <button>
                            共有
                        </button>
                    </div>
                </div>
            </div>

            <div class="comments-section">
                <h3 id="comment-count-header">コメント (3件)</h3>
                <textarea id="comment-input" placeholder="コメントを追加..."></textarea>

                <div class="comment-submit-area">
                    <button id="comment-submit">コメント</button>
                </div>

                <ul id="comments-list">
                    <li>
                        <div class="comment-content">ユーザーA: 癒されます！</div>
                        <div class="comment-actions">
                            <button class="comment-like-button">👍</button>
                            <span class="like-count">3</span>
                        </div>
                    </li>
                    <li>
                        <div class="comment-content">ユーザーB: かわいい</div>
                        <div class="comment-actions">
                            <button class="comment-like-button">👍</button>
                            <span class="like-count">1</span>
                        </div>
                    </li>
                    <li>
                        <div class="comment-content">ユーザーC: さいこう！！</div>
                        <div class="comment-actions">
                            <button class="comment-like-button">👍</button>
                            <span class="like-count">0</span>
                        </div>
                    </li>
                </ul>
            </div>
        </div>

        <div class="sidebar-area">
            <h3>関連動画</h3>
            <div class="related-videos-grid">
                <a href="#" class="related-video-item" data-video-id="-0bzHcFz2Do"
                    data-title="2025狂犬病予防注射会場のドタバタ劇⑥ 富山市保健所前編" data-channel-name="とやまソフトセンター" data-views="22万回視聴"
                    data-time="7か月前" style="display: none;"> <img
                        src="https://img.youtube.com/vi/-0bzHcFz2Do/hqdefault.jpg" alt="メイン動画予備">
                    <div class="video-details">
                        <p class="video-title">2025狂犬病予防注射会場のドタバタ劇⑥ 富山市保健所前編</p>
                        <p class="channel-name">とやまソフトセンター</p>
                        <p class="views-time">22万回視聴・7か月前</p>
                    </div>
                </a>

                <a href="#" class="related-video-item" data-video-id="A4SbWHa7TWE"
                    data-title="【時間がない方必見】3時間の映画『国宝』を多忙の3人が分割鑑賞！足りない部分を補完しあったら皆で号泣できるのか！？"
                    data-channel-name="さらば青春の光Official Youtube Channel" data-views="360万回視聴" data-time="3か月前">
                    <img src="https://img.youtube.com/vi/A4SbWHa7TWE/hqdefault.jpg" alt="テスト動画">
                    <div class="video-details">
                        <p class="video-title">時間がない方必見】3時間の映画『国宝』を多忙の3人が分割鑑賞！足りない部分を補完しあったら皆で号泣できるのか！？</p>
                        <p class="channel-name">さらば青春の光Official Youtube Channel</p>
                        <p class="views-time">360万回視聴・3か月前</p>
                    </div>
                </a>

                <a href="#" class="related-video-item" data-video-id="Q71sg8bLh6E" data-title="邪魔されクッキング"
                    data-channel-name="inosemarine" data-views="2730万回視聴" data-time="10年前">
                    <img src="https://img.youtube.com/vi/Q71sg8bLh6E/maxresdefault.jpg" alt="関連動画2">
                    <div class="video-details">
                        <p class="video-title">邪魔されクッキング</p>
                        <p class="channel-name">inosemarine</p>
                        <p class="views-time">2730万回視聴・10年前</p>
                    </div>
                </a>

                <a href="#" class="related-video-item" data-video-id="srjEOrPuLBU" data-title="【実家飯】ジャンボ母の本気を食らう相方"
                    data-channel-name="レインボージャンボのたかおの食うチャンネル" data-views="800万回視聴" data-time="3年前">
                    <img src="https://img.youtube.com/vi/srjEOrPuLBU/maxresdefault.jpg" alt="関連動画2">
                    <div class="video-details">
                        <p class="video-title">【実家飯】ジャンボ母の本気を食らう相方</p>
                        <p class="channel-name">レインボージャンボのたかおの食うチャンネル</p>
                        <p class="views-time">800万回視聴・3年前</p>
                    </div>
                </a>

                <a href="#" class="related-video-item" data-video-id="i8ItNP_dvIE" data-title="私情持ち込みOKの裁判"
                    data-channel-name="もののけ" data-views="400万回視聴" data-time="4年前">
                    <img src="https://img.youtube.com/vi/i8ItNP_dvIE/hqdefault.jpg" alt="関連動画2">
                    <div class="video-details">
                        <p class="video-title">私情持ち込みOKの裁判</p>
                        <p class="channel-name">もののけ</p>
                        <p class="views-time">400万回視聴・4年前</p>
                    </div>
                </a>

                <a href="#" class="related-video-item" data-video-id="YRuBLW0zliw" data-title="承認欲求の奴隷"
                    data-channel-name="ほがらかなやつら。" data-views="22万回視聴" data-time="7か月前">
                    <img src="https://img.youtube.com/vi/YRuBLW0zliw/hqdefault.jpg" alt="関連動画2">
                    <div class="video-details">
                        <p class="video-title">承認欲求の奴隷</p>
                        <p class="channel-name">ほがらかなやつら。</p>
                        <p class="views-time">22万回視聴・7か月前</p>
                    </div>
                </a>

                <a href="#" class="related-video-item" data-video-id="IW70knwlJ00"
                    data-title="電話口の一大事に心痛めつつも目の前には日常があるお母さん【俵山の人間モノマネ】" data-channel-name="スクールゾーンChannel"
                    data-views="30万回視聴" data-time="2年前">
                    <img src="https://img.youtube.com/vi/IW70knwlJ00/maxresdefault.jpg" alt="関連動画3">
                    <div class="video-details">
                        <p class="video-title">電話口の一大事に心痛めつつも目の前には日常があるお母さん【俵山の人間モノマネ】</p>
                        <p class="channel-name">スクールゾーンChannel</p>
                        <p class="views-time">30万回視聴・2年前</p>
                    </div>
                </a>

                <a href="#" class="related-video-item" data-video-id="88npQhcm9qk" data-title="柴犬の前で食パンなでなでしてみた"
                    data-channel-name="柴犬らんまる" data-views="1000万回視聴" data-time="4年前">
                    <img src="https://img.youtube.com/vi/88npQhcm9qk/maxresdefault.jpg" alt="関連動画3">
                    <div class="video-details">
                        <p class="video-title">柴犬の前で食パンなでなでしてみた</p>
                        <p class="channel-name">柴犬らんまる</p>
                        <p class="views-time">1000万回視聴・4年前</p>
                    </div>
                </a>

                <a href="#" class="related-video-item" data-video-id="WgfykCMtkXY"
                    data-title="2022狂犬病予防注射会場のドタバタ劇・其の5 射水市後編" data-channel-name="とやまソフトセンター" data-views="158万回視聴"
                    data-time="3年前">
                    <img src="https://img.youtube.com/vi/WgfykCMtkXY/maxresdefault.jpg" alt="関連動画1">
                    <div class="video-details">
                        <p class="video-title">2022狂犬病予防注射会場のドタバタ劇・其の5 射水市後編</p>
                        <p class="channel-name">とやまソフトセンター</p>
                        <p class="views-time">158万回視聴・3年前</p>
                    </div>
                </a>

                <a href="#" class="related-video-item" data-video-id="8J8kVjw6FBU"
                    data-title="【相棒】ガッツの右京と、頭脳派の亀山【ジェラードン】" data-channel-name="ジェラードンチャンネル" data-views="569万回視聴"
                    data-time="1年前">
                    <img src="https://img.youtube.com/vi/8J8kVjw6FBU/hqdefault.jpg" alt="関連動画2">
                    <div class="video-details">
                        <p class="video-title">【相棒】ガッツの右京と、頭脳派の亀山【ジェラードン】</p>
                        <p class="channel-name">ジェラードンチャンネル</p>
                        <p class="views-time">569万回視聴・1年前</p>
                    </div>
                </a>
            </div>
            <div id="no-results-message" style="display: none; padding: 10px; color: #606060;">
                お探しの動画は見つかりませんでした。
            </div>
        </div>
    </div>

    <script>
        // ====================================================================
        // 1. 動画ごとのデータ保管庫 (コメントやいいね数など)
        // ====================================================================
        // 初期データとして、いくつかの動画のコメントを用意しておきます
        const videoDataStore = {
            "-0bzHcFz2Do": {
                comments: [
                    { user: "いぬらぶ", content: "富山市のワンちゃんたち、みんな頑張ってて偉い！", likes: 342 },
                    { user: "柴犬オーナー", content: "これ年末に地上波でやってくれたらずっと見る", likes: 120 },
                    { user: "とやま市民", content: "カメラの高さがずっと人間の目線じゃなくて犬の目線なの好き", likes: 56 }
                ]
            },
            "A4SbWHa7TWE": {
                comments: [
                    { user: "さらばファン", content: "この企画待ってました！発想が天才すぎる。", likes: 1502 },
                    { user: "映画好き", content: "お願いだから三人で全部見て答え合わせしてる様子も動画にしてほしい", likes: 450 },
                    { user: "dhuwpip", content: "ひょうろくを3番手にすることでいい感じにネタバレ防いでる", likes: 450 },
                ]
            },
            "Q71sg8bLh6E": {
                comments: [
                    { user: "料理人", content: "ワンちゃん邪魔しすぎて笑う。もはや主役ですね。", likes: 2005 },
                    { user: "癒やし求め中", content: "何食わぬ顔でもりもり食べてるのかわいいｗ", likes: 1200 },
                ]
            },
            "srjEOrPuLBU": {
                comments: [
                    { user: "飯テロ被害者", content: "ジャンボのお母さんの料理、マジで美味そう。実家帰りたくなった。", likes: 890 },
                    { user: "eufhlae", content: "相方の食べっぷりが良すぎて、見てるだけでお腹空く。", likes: 420 },
                    { user: "家庭料理最高", content: "茶色いおかずが多いのが実家感ある", likes: 230 }
                ]
            },
            "i8ItNP_dvIE": {
                comments: [
                    { user: "もののけファン", content: "このシュールな世界観、唯一無二", likes: 120 },
                    { user: "リーガルチェック", content: "最初「犯罪s...被告人」と言い直してるのに途中から諦めて犯罪者って言ってるの好き", likes: 300 }
                ]
            },
            "YRuBLW0zliw": {
                comments: [
                    { user: "現代人A", content: "言葉が鋭すぎてほがらかどころではないの笑う", likes: 98 },
                    { user: "考察班", content: "「人生は許可制じゃない」、大事にしたい言葉だ", likes: 45 },
                    { user: "考察班", content: "ナマケモノから出るとは思えない鋭利な言葉の数々で好き", likes: 45 },
                ]
            },
            "IW70knwlJ00": {
                comments: [
                    { user: "俵山マニア", content: "お母さんの「はいはい、わかったから」感がリアルすぎて草。", likes: 1500 },
                    { user: "あるある探検家", content: "電話の内容重いのに、手元がずっと家事してるの解釈一致です。", likes: 800 },
                    { user: "スクールゾーン推し", content: "人間観察の鬼。細かい表情まで似すぎてる", likes: 450 }
                ]
            },
            "88npQhcm9qk": {
                comments: [
                    { user: "らんまる応援団", content: "食パンに敵意まるだしで可愛い", likes: 5000 },
                    { user: "ShibaInu_Love", content: "されるがままの表情がたまらん。癒やしをありがとう。", likes: 2100 },
                ]
            },
            "WgfykCMtkXY": {
                comments: [
                    { user: "富山県民", content: "射水市編も最高ですね！ワンちゃんの個性が爆発してる。", likes: 210 },
                    { user: "注射嫌い", content: "逃げようとする子と、悟りを開いてる子の差がすごいｗ", likes: 89 },
                    { user: "ソフトセンターファン", content: "このシリーズ、ずっと続けてほしいです。編集が愛に溢れてる。", likes: 150 }
                ]
            },
            "8J8kVjw6FBU": {
                comments: [
                    { user: "ジェラ推し", content: "右京さんと亀山くんのキャラが逆転してるの面白すぎる", likes: 3200 },
                    { user: "相棒ファン", content: "「思ったことを口に出してしまう」が本当に悪い癖なパターンの右京さん…", likes: 1200 },
                ]
            }
        };

        // ====================================================================
        // ユーティリティ関数
        // ====================================================================
        function extractVideoId(src) {
            const match = src.match(/embed\/([a-zA-Z0-9_-]+)/);
            return match ? match[1] : null;
        }

        function setupCommentLikeFeature(commentItem) {
            const likeButton = commentItem.querySelector('.comment-like-button');
            const likeCountSpan = commentItem.querySelector('.like-count');
            if (!likeButton || !likeCountSpan) return;

            let currentCommentLikes = parseInt(likeCountSpan.textContent) || 0;

            likeButton.addEventListener('click', function () {
                likeButton.classList.add('clicked-animate');
                setTimeout(() => { likeButton.classList.remove('clicked-animate'); }, 100);

                if (likeButton.classList.contains('active')) {
                    currentCommentLikes--;
                } else {
                    currentCommentLikes++;
                }
                likeCountSpan.textContent = currentCommentLikes;
                likeButton.classList.toggle('active');
            });
        }

        // ====================================================================
        // DOMContentLoaded イベント
        // ====================================================================
        document.addEventListener('DOMContentLoaded', () => {
            const mainIframe = document.querySelector('.video-player iframe');
            const relatedVideosGrid = document.querySelector('.related-videos-grid');
            const currentVideoTitleElement = document.getElementById('current-video-title');
            const currentChannelNameElement = document.getElementById('current-channel-name');
            const currentViewsAndTimeElement = document.getElementById('current-subscriber-count');
            const commentsList = document.getElementById('comments-list');
            const commentCountHeader = document.getElementById('comment-count-header');
            const commentInput = document.getElementById('comment-input');

            const searchInput = document.querySelector('.search-input');
            const searchButton = document.querySelector('.search-button');
            const noResultsMessage = document.getElementById('no-results-message');
            const mainContainer = document.querySelector('.container');
            const mainVideoArea = document.querySelector('.main-video-area');

            let currentVideoInfo = {
                id: extractVideoId(mainIframe.src),
                title: currentVideoTitleElement.textContent,
                channelName: currentChannelNameElement.textContent,
                viewsAndTime: currentViewsAndTimeElement.textContent,
            };

            // --- コメント描画機能 ---
            function renderComments(videoId) {
                commentsList.innerHTML = ''; // 現在のリストをクリア

                // データがなければ空の配列を用意
                if (!videoDataStore[videoId]) {
                    videoDataStore[videoId] = { comments: [] };
                }

                const data = videoDataStore[videoId];
                commentCountHeader.textContent = `コメント (${data.comments.length}件)`;

                data.comments.forEach(comment => {
                    const li = document.createElement('li');
                    li.innerHTML = `
                    <div class="comment-content">${comment.user}: ${comment.content}</div>
                    <div class="comment-actions">
                        <button class="comment-like-button">👍</button>
                        <span class="like-count">${comment.likes}</span>
                    </div>`;
                    commentsList.appendChild(li);
                    setupCommentLikeFeature(li);
                });
            }

            // 最初のコメントを表示
            renderComments(currentVideoInfo.id);

            // --- 動画切り替え機能 ---
            function switchVideo(newVideoElement) {
                const newId = newVideoElement.dataset.videoId;

                mainIframe.src = `https://www.youtube.com/embed/${newId}?controls=1&rel=0`;
                currentVideoTitleElement.textContent = newVideoElement.dataset.title;
                currentChannelNameElement.textContent = newVideoElement.dataset.channelName;
                currentViewsAndTimeElement.textContent = `${newVideoElement.dataset.views}・${newVideoElement.dataset.time}`;

                currentVideoInfo = {
                    id: newId,
                    title: newVideoElement.dataset.title,
                    channelName: newVideoElement.dataset.channelName,
                    viewsAndTime: `${newVideoElement.dataset.views}・${newVideoElement.dataset.time}`,
                };

                // ★ コメントを切り替え
                renderComments(newId);

                document.querySelectorAll('.related-video-item').forEach(item => {
                    item.style.display = (item.dataset.videoId === newId) ? 'none' : 'flex';
                });

                mainContainer.classList.remove('search-results', 'no-results');
                mainVideoArea.style.display = 'block';
                noResultsMessage.style.display = 'none';
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }

            // --- 検索機能 ---
            function performSearch() {
                const query = searchInput.value.toLowerCase().trim();
                if (query === "") {
                    mainContainer.classList.remove('search-results', 'no-results');
                    mainVideoArea.style.display = 'block';
                    noResultsMessage.style.display = 'none';
                    document.querySelectorAll('.related-video-item').forEach(item => {
                        item.style.display = (item.dataset.videoId === currentVideoInfo.id) ? 'none' : 'flex';
                    });
                    return;
                }

                let foundCount = 0;
                document.querySelectorAll('.related-video-item').forEach(item => {
                    const title = item.querySelector('.video-title').textContent.toLowerCase();
                    if (title.includes(query)) {
                        item.style.display = 'flex';
                        foundCount++;
                    } else {
                        item.style.display = 'none';
                    }
                });

                mainVideoArea.style.display = 'none';
                if (foundCount === 0) {
                    noResultsMessage.style.display = 'block';
                    mainContainer.classList.add('no-results');
                    mainContainer.classList.remove('search-results');
                } else {
                    noResultsMessage.style.display = 'none';
                    mainContainer.classList.add('search-results');
                    mainContainer.classList.remove('no-results');
                }
            }

            // --- イベント登録 ---
            searchButton.addEventListener('click', performSearch);
            searchInput.addEventListener('keypress', (e) => { if (e.key === 'Enter') performSearch(); });

            function handleRelatedVideoClick(event) {
                event.preventDefault();
                switchVideo(event.currentTarget);
            }

            document.querySelectorAll('.related-video-item').forEach(link => {
                link.addEventListener('click', handleRelatedVideoClick);
            });

            // --- コメント投稿機能 (保存対応) ---
            document.getElementById('comment-submit').addEventListener('click', () => {
                const txt = commentInput.value.trim();
                if (txt) {
                    // 1. データ保管庫に保存 (これで動画を切り替えても残る)
                    const newComment = { user: "あなた", content: txt, likes: 0 };
                    videoDataStore[currentVideoInfo.id].comments.unshift(newComment);

                    // 2. 再描画
                    renderComments(currentVideoInfo.id);
                    commentInput.value = "";
                }
            });

            // いいねボタンの初期設定
            const likeBtn = document.getElementById('like-button');
            const likeCnt = document.getElementById('like-count');
            let currentLikes = 2300;

            likeBtn.addEventListener('click', () => {
                likeBtn.classList.add('clicked-animate');
                setTimeout(() => likeBtn.classList.remove('clicked-animate'), 100);
                if (likeBtn.classList.contains('liked')) {
                    currentLikes--; likeBtn.classList.remove('liked');
                } else {
                    currentLikes++; likeBtn.classList.add('liked');
                    document.getElementById('dislike-button').classList.remove('disliked');
                }
                likeCnt.textContent = (currentLikes / 1000).toFixed(1) + '千';
            });

            document.getElementById('dislike-button').addEventListener('click', function () {
                this.classList.toggle('disliked');
                if (likeBtn.classList.contains('liked')) {
                    likeBtn.classList.remove('liked');
                    currentLikes--;
                    likeCnt.textContent = (currentLikes / 1000).toFixed(1) + '千';
                }
            });
        });
    </script>
</body>

</html>